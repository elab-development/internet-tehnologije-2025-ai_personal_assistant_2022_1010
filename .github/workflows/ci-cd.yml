name: CI/CD Pipeline

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]

jobs:
  # Job 1: Build Docker Images
  build:
    name: Build Docker Images
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v3
      
      - name: Set up Docker Buildx
        uses: docker/setup-buildx-action@v2
      
      - name: Build Backend Image
        run: |
          docker build -f Dockerfile.backend -t ai-assistant-backend:${{ github.sha }} .
      
      - name: Build Frontend Image
        run: |
          docker build -f Dockerfile.frontend -t ai-assistant-frontend:${{ github.sha }} .
      
      - name: Verify images built
        run: |
          docker images